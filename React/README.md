# React

## ğŸ¤” ë¦¬ì•¡íŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” JSX ë¬¸ë²•ì€ ìˆœìˆ˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ê°€ ì•„ë‹Œë° ë¸Œë¼ìš°ì €ì—ì„œ ì–´ë–»ê²Œ ë™ì‘í•  ìˆ˜ ìˆëŠ” ê±¸ê¹Œìš”?

> ìš°ì„  JSXëŠ” í•„ìˆ˜ì¼ê¹Œìš”?

Reactì—ì„œ JSXëŠ” í•„ìˆ˜ê°€ ì•„ë‹™ë‹ˆë‹¤. ë¹Œë“œ í™˜ê²½ì—ì„œ ì»´íŒŒì¼ ì„¤ì • (ì›¹íŒ©, ë°”ë²¨)ì´ ê·€ì°®ê±°ë‚˜ í•˜ê¸° ì‹«ì„ ë•ŒëŠ” JSX ì—†ì´ ê·¸ëƒ¥ Reactë¡œ ì½”ë”©ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```js
// JSXë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì˜ˆì‹œì…ë‹ˆë‹¤.
class Hello extends React.Component {
  render() {
    return React.createElement('div', null, `Hello ${this.props.toWhat}`);
  }
}

ReactDOM.render(
  React.createElement(Hello, {toWhat: 'World'}, null),
  document.getElementById('root')
);
```

`JSX` ë¬¸ë²•ì€ ìš°ë¦¬ê°€ ìë°”ìŠ¤í¬ë¦½íŠ¸ì•ˆì— ë§ˆí¬ì—… ì½”ë“œë¥¼ ë„£ì„ ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. í•˜ì§€ë§Œ í•´ë‹¹ ì½”ë“œëŠ” ë¸Œë¼ìš°ì €ì—ì„œ ê·¸ëŒ€ë¡œ ë™ì‘í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ë¸Œë¼ìš°ì €ê°€ ì´í•´í•  ìˆ˜ ìˆëŠ” ì½”ë“œë¡œ ë³€ê²½ ì‹œì¼œì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.

`babel`ì€ ìµœì‹  ë¬¸ë²•ì„ ëª¨ë“  ë¸Œë¼ìš°ì €ì—ì„œ ë™ì‘í•  ìˆ˜ ìˆëŠ” ì˜ˆì „ ì½”ë“œë¡œ ë˜ëŒë¦¬ê±°ë‚˜, í‘œì¤€ì—ì„œ ë²—ì–´ë‚œ ì½”ë“œë¥¼ ë¸Œë¼ìš°ì €ê°€ ì´í•´í•  ìˆ˜ ìˆëŠ” ì½”ë“œë¡œ ë³€í™˜í•´ì£¼ëŠ” íŠ¸ëœìŠ¤íŒŒì¼ëŸ¬ì…ë‹ˆë‹¤.

`JSX` ë¬¸ë²•ì€ `babel`ì„ í†µí•´ì„œ ë¸Œë¼ìš°ì €ê°€ ì´í•´í•  ìˆ˜ ìˆëŠ” ì½”ë“œë¡œ ë³€ê²½ë©ë‹ˆë‹¤. Reactì˜ `createElement` ë©”ì„œë“œë¥¼ í†µí•´ì„œ DOM elementë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> ì°¸ê³ 

- [JSX ì—†ì´ ì‚¬ìš©í•˜ëŠ” React](https://ko.reactjs.org/docs/react-without-jsx.html)

## ğŸ¤” ë¦¬ì•¡íŠ¸ì—ì„œ ë°°ì—´ì— `key` ì†ì„±ì€ ì™œ í•„ìš”í• ê¹Œìš”?

```js
array.map(item => <Item key={item.key} />);
```

ìš°ë¦¬ê°€ ë¦¬ì•¡íŠ¸ë¥¼ ì‚¬ìš©í•˜ë‹¤ë³´ë©´ ë°°ì—´ì„ ì¶œë ¥í•  ë•Œ `map` ë©”ì„œë“œë¥¼ í†µí•´ì„œ ì¶œë ¥ì„ ë§ì´í•©ë‹ˆë‹¤.
ê·¸ ë•Œ `key` ì†ì„±ì„ ë„£ì–´ì£¼ì§€ ì•Šìœ¼ë©´ ê²½ê³ ì°½ì´ ëœ¨ê²Œ ë©ë‹ˆë‹¤.

![key error](./images/key_error.png)

> í•´ë‹¹ `key` í”„ë¡œí¼í‹°ëŠ” ë¦¬ì•¡íŠ¸ì—ì„œ ì œê³µí•´ì£¼ëŠ” ì†ì„±ì…ë‹ˆë‹¤.
> ReactëŠ” `key`ë¥¼ í†µí•´ ê¸°ì¡´ íŠ¸ë¦¬ì™€ ì´í›„ íŠ¸ë¦¬ì˜ ìì‹ë“¤ì´ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

> KeyëŠ” Reactê°€ ì–´ë–¤ í•­ëª©ì„ ë³€ê²½, ì¶”ê°€ ë˜ëŠ” ì‚­ì œí• ì§€ ì‹ë³„í•˜ëŠ” ê²ƒì„ ë•ìŠµë‹ˆë‹¤. keyëŠ” ì—˜ë¦¬ë¨¼íŠ¸ì— ì•ˆì •ì ì¸ ê³ ìœ ì„±ì„ ë¶€ì—¬í•˜ê¸° ìœ„í•´ ë°°ì—´ ë‚´ë¶€ì˜ ì—˜ë¦¬ë¨¼íŠ¸ì— ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤.

ë¦¬ì•¡íŠ¸ ê³µì‹ë¬¸ì„œì—ì„œëŠ” ìœ„ì™€ ê°™ì´ ì„¤ëª…í•˜ê³  ìˆìŠµë‹ˆë‹¤.
ë§ ê·¸ëŒ€ë¡œ ë¦¬ìŠ¤íŠ¸ë‚˜ ì–´ë–¤ ë‚˜ì—´ë˜ì–´ ìˆëŠ” ì•„ì´í…œë“¤ì˜ ì¶”ê°€, ì‚­ì œì™€ ê°™ì€ ë³€ê²½ ì„±ëŠ¥ì„ ì¡°ê¸ˆ ë” ì¢‹ê²Œ í•´ì¤ë‹ˆë‹¤. ë¦¬ì•¡íŠ¸ì—ì„œëŠ” í•´ë‹¹ ì„±ëŠ¥ ê°œì„ ì„ `key`ë¥¼ í†µí•´ì„œ í•˜ê³  ìˆì£ .

ë§Œì•½ì— ë¦¬ìŠ¤íŠ¸ê°€ ë³€ê²½ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ìƒê´€ì—†ì§€ë§Œ, ì‚­ì œ, ì¶”ê°€ì™€ ê°™ì€ ë³€ê²½ì‚¬í•­ì´ ë§ì€ ë¦¬ìŠ¤íŠ¸ë¼ë©´ ì¸ë±ìŠ¤ë¥¼ `key`ë¡œ ë¶€ì—¬í•˜ëŠ” ê²ƒì€ í”¼í•˜ì„¸ìš”.

ì´ìœ ëŠ” ë¦¬ì•¡íŠ¸ëŠ” `key`ë¥¼ `DOM`ì„ ì‹ë³„í•˜ëŠ” í‚¤ë¡œ ì‚¬ìš©í•˜ê³  ìˆì§€ë§Œ, ë¦¬ìŠ¤íŠ¸ì˜ ì¸ë±ìŠ¤ë¥¼ `key`ì— ë„£ìœ¼ë©´ ë³€ê²½ì´ë‚˜ ì‚­ì œê°€ ë  ë•Œ ë¦¬ì•¡íŠ¸ê°€ ê¸°ëŒ€í•˜ëŠ” `key` ê°’ì˜ ìš”ì†Œê°€ ë³€ê²½ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì œê°€ ì°¸ê³ ë¡œ ì˜¬ë ¤ë“œë¦° ë§í¬ì—ì„œëŠ” ì„¸ ê°€ì§€ ì¡°ê±´ì„ ë§Œì¡±í•˜ë©´ `key`ë¡œ ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•´ë„ ê´œì°®ë‹¤ê³  í•©ë‹ˆë‹¤.

1. ë¦¬ìŠ¤íŠ¸ì™€ ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œë“¤ì€ ì •ì ì´ê³ , ì ˆëŒ€ ë³€í•˜ì§€ ì•Šì„ ë•Œ
2. ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œì— ê³ ìœ í•œ `id` ê°’ì´ ì—†ì„ ë•Œ
3. ë¦¬ìŠ¤íŠ¸ê°€ ì¬ì¡°ì •ë˜ê±°ë‚˜ í•„í„°ë§ë˜ì§€ ì•Šì„ ë•Œ

ì´ëŸ° ê²½ìš°ê°€ ì•„ë‹ˆë¼ë©´ [nanoid](https://github.com/ai/nanoid/) ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•´ì„œ ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œì˜ ê³ ìœ í•œ ì•„ì´ë””ë¥¼ ë§Œë“¤ì–´ `key` ê°’ìœ¼ë¡œ ë¶€ì—¬í•˜ê¸¸ ê¶Œì¥í•˜ê³  ìˆìŠµë‹ˆë‹¤.

### ì°¸ê³ 

- [React keys](https://ko.reactjs.org/docs/reconciliation.html#keys)
- [React list key](https://ko.reactjs.org/docs/lists-and-keys.html#keys)
- [Index as a key is an anti-pattern](https://robinpokorny.medium.com/index-as-a-key-is-an-anti-pattern-e0349aece318)

## ğŸ¤” HOC, Higher Order Componentê°€ ë¬´ì—‡ì¼ê¹Œìš”?

> ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ëŠ” ì»´í¬ë„ŒíŠ¸ì˜ ë¡œì§ì„ ì¬ì‚¬ìš©í•˜ê¸° ìœ„í•œ Reactì˜ ê³ ê¸‰ ê¸°ìˆ ì…ë‹ˆë‹¤.
> ì‰½ê²Œ ë§í•´ ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ê°€ì ¸ì™€ì„œ ìƒˆ ì»´í¬ë„ŒíŠ¸ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.

ê¸°ë³¸ì ìœ¼ë¡œ í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´

```js
const Component = (props) => {
  /*
  * ì»´í¬ë„ŒíŠ¸ ë¡œì§
  * ...
  */
  return (
    /*
    * ì»´í¬ë„ŒíŠ¸ ë·°
    * ...
    */
  )
};
```

ìœ„ì™€ ê°™ì´ `props`ë¥¼ ë°›ì•„ì„œ ë·°ë¥¼ ë°˜í™˜í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì¸ ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤.

ê·¸ì— ë°˜í•´ ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

```js
// ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
const EnhancedComponent = higherOrderComponent(WrappedComponent);
```

ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ì˜ˆì‹œëŠ” ë³´ì—¬ì£¼ëŠ” ë·°ëŠ” ë¹„ìŠ·í•œë° ì‚¬ìš©í•˜ëŠ” ë°ì´í„°ê°€ ë‹¤ë¥¼ ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```js
// ì´ í•¨ìˆ˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ê³ ..
function withSubscription(WrappedComponent, selectData) {
  // ...ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ë°˜í™˜í•˜ëŠ”ë°...
  return class extends React.Component {
    constructor(props) {
      super(props);
      this.handleChange = this.handleChange.bind(this);
      this.state = {
        data: selectData(DataSource, props)
      };
    }

    componentDidMount() {
      // ... êµ¬ë…ì„ ë‹´ë‹¹í•˜ê³ ...
      DataSource.addChangeListener(this.handleChange);
    }

    componentWillUnmount() {
      DataSource.removeChangeListener(this.handleChange);
    }

    handleChange() {
      this.setState({
        data: selectData(DataSource, this.props)
      });
    }

    render() {
      // ... ë˜í•‘ëœ ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒˆë¡œìš´ ë°ì´í„°ë¡œ ëœë”ë§ í•©ë‹ˆë‹¤!
      // ì»´í¬ë„ŒíŠ¸ì— ì¶”ê°€ë¡œ propsë¥¼ ë‚´ë ¤ì£¼ëŠ” ê²ƒì— ì£¼ëª©í•˜ì„¸ìš”.
      return <WrappedComponent data={this.state.data} {...this.props} />;
    }
  };
}

/* ì‚¬ìš©í•˜ëŠ” ë²• */
const CommentListWithSubscription = withSubscription(
  CommentList,
  (DataSource) => DataSource.getComments()
);

const BlogPostWithSubscription = withSubscription(
  BlogPost,
  (DataSource, props) => DataSource.getBlogPost(props.id)
);
```

### ì£¼ì˜ ì‚¬í•­

- ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ì¸ìë¡œ ë°›ì•„ì˜¨ ì»´í¬ë„ŒíŠ¸ì˜ í”„ë¡œí† íƒ€ì…ì„ ë³€ê²½í•˜ì§€ ì•Šë„ë¡ í•©ë‹ˆë‹¤.
- `render` í•¨ìˆ˜ ì•ˆì—ì„œ ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šë„ë¡ í•©ë‹ˆë‹¤. (ì„±ëŠ¥ ë¬¸ì œ = í•œë²ˆ ë¦¬ë Œë”ë§ ì¼ì–´ë‚  ë•Œ ë§ˆë‹¤ ìƒˆë¡œìš´ ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•¨)
- ì •ì  ë©”ì„œë“œëŠ” ë”°ë¡œ ë³µì‚¬í•´ì•¼í•œë‹¤.
- `ref`ëŠ” ì „ë‹¬ë˜ì§€ ì•ŠëŠ”ë‹¤. (`React.forwardRef`ë¥¼ í†µí•´ì„œ í•´ê²°ê°€ëŠ¥)

### ì°¸ê³ 

- [higher order components | React](https://ko.reactjs.org/docs/higher-order-components.html)
